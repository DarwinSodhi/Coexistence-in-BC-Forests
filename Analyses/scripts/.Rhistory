#code to simulate fake data based on experimental design
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
graphics.off()
setwd("~/Documents/GitHub/Coexistence-in-BC-Forests/Analyses/scripts")
set.seed(1234)
#### codes for the four treatments
density <- c(0,1)
temptreat <- c(0,1)
soil_type <- c(0,1)
soil_treat <- c(0,1)
error <- 0.15
### codes for intercept and individual effects
#y = biomass
intercepthere <- 50
soiltype_effect <- -10 #loses 10 units of biomass in conspecific soil
density_effect <- -5 # as in you LOSE 5 units of biomass in the high treatment
temp_effect <- -7.5 # as in you LOSE 7.5 units of biomass in the low temp treatment
soiltreat_effect <- 5 # as in you Gain 10 units of biomass in the sterilized streatment
#### codes for interactions
densoiltype_intxn <- -12 #high density + conspecific soil causes a loss of 12 units of biomass
denstemp_intxn <- 2 # as in when you have high density and low temp you GAIN 2 units of biomass
densoiltreat_itxn <- -1 #high density + sterilization causes a Loss of one unit of biomass
tempsoiltype_intxn <- -4 #low temp + conspecific soil causes a loss of 4 units of biomass
tempsoiltreat_intxn <- -2.5 #low temp + sterilization causes a loss of 2.5 units of biomass
soiltypesoiltreat_intxn <- -1.5 #conspecific soil + sterilization causes a loss of 1.5 unites of biomass
densoiltypetemp_intxn <- -0.5 #low temp + high density + conspecific soil causes a loss of 0.5 units of biomass
densoiltreattemp_intxn <- 1
densoiltypesoiltreat_intxn <- 2.5
soiltreattempsoiltype_intxn <- 0.5
all_intxn <- -0.75
#codes for number of replicates
reps_per_treatment <- 10 # 10 is always a good place to start (easy to do the math in your head and check your code)
ntot <- length(density)*length(temptreat)*length(soil_type)*length(soil_treat)*reps_per_treatment
#creates datae frame for a factorial design including all four treatments
factorialgrid <- expand.grid(x_density = c(0, 1), x_temp = c(0,1), x_soiltype= c(0,1), x_soiltreat= c(0,1))
#codes a data frame based on factorial grid and number of reps
df <- as.data.frame(factorialgrid[rep(seq_len(nrow(factorialgrid)), each = reps_per_treatment),])
#calculates the biomass based on treatments and interactions
df$y_biomass <- intercepthere +
density_effect*df$x_density +
temp_effect*df$x_temp +
soiltype_effect*df$x_soiltype +
soiltreat_effect*df$x_soiltreat + # 4 main effects
densoiltype_intxn * (df$x_density * df$x_soiltype) +
denstemp_intxn * (df$x_density * df$x_temp) +
densoiltreat_itxn * (df$x_density * df$x_soiltreat) +
tempsoiltreat_intxn * (df$x_temp * df$x_soiltreat) +
tempsoiltype_intxn * (df$x_temp * df$x_soiltype) +
soiltypesoiltreat_intxn * (df$x_soiltype * df$x_soiltreat) + # 6 2-way intxns
densoiltypetemp_intxn * (df$x_density * df$x_soiltype * df$x_temp) +
densoiltreattemp_intxn * (df$x_density * df$x_soiltreat * df$x_temp) +
densoiltypesoiltreat_intxn * (df$x_density * df$x_soiltype * df$x_soiltreat) +
soiltreattempsoiltype_intxn * (df$x_soiltreat * df$x_temp * df$x_soiltype ) + #4 3-way intxns
all_intxn * (df$x_density * df$x_temp * df$x_soiltype * df$x_soiltreat)  # 1 4-way intxn
# incorporating 15% error into y
df$y_pred<- df$y_biomass + rnorm(ntot, error)
#Statistical model to test paramaters
lm(y_pred~ x_density * x_temp * x_soiltype * x_soiltreat, data= df)
View(df)
View(df)
#code to simulate fake data based on experimental design for a two way interaction
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
graphics.off()
setwd("~/Documents/GitHub/Coexistence-in-BC-Forests/Analyses/scripts")
set.seed(1234)
### code the fake data
density <- c(0,1)
temptreat <- c(0,1)
soil_type <- c(0,1)
intercepthere <- 30  # watch out of potentially reserved words in R ..
#coding effects
density_effect <- -5 # as in you LOSE 5 units of biomass in the high treatment
temp_effect <- -7.5 # as in you LOSE 7.5 units of biomass in the high temp treatment
denstemp_intxn <- 2 # as in when you have high density and high temp you GAIN 2 units of biomass
soiltype_effect <- -10 #loses 10 units of biomass in conspecific soil
densoil_intxn <- -12 #high density + conspecific soil causes a loss of 12 units of biomass
tempsoil_intxn <- -4 #high temp + conspecific soil causes a loss of 4 units of biomass
densoiltemp_intxn <- -0.5 #high temp + high density + conspecific soil causes a loss of 0.5 units of biomass
reps_per_treatment <- 100 # 10 is always a good place to start (easy to do the math in your head and check your code)
ntot <- length(density)*length(temptreat)*length(soil_type)*reps_per_treatment
factorialgrid <- expand.grid(x_density = c(0, 1), x_temp = c(0,1), x_soil= c(0,1))
df <- as.data.frame(factorialgrid[rep(seq_len(nrow(factorialgrid)), each = reps_per_treatment),])
df$y_biomass <- intercepthere +
density_effect*df$x_density +
temp_effect*df$x_temp +
soiltype_effect*df$x_soil + #3 one-way interactions
denstemp_intxn*(df$x_density*df$x_temp) +
densoil_intxn * (df$x_density*df$x_soil) +
tempsoil_intxn * (df$x_temp * df$x_soil) + #3 two way interactions
densoiltemp_intxn * (df$x_density * df$x_temp * df$x_soil) #1 three way interaction
View(df)
View(factorialgrid)
#incorporating error
error <- 0.15 * 30
# incorporating 15% error into y
df$y_pred<- df$y_biomass + rnorm(ntot, error)
View(df)
#Statistical model to test paramaters
lm(y_pred~ x_density * x_temp * x_soil, data= df)
#Statistical model to test paramaters
lm(y_pred~ x_density * x_temp * x_soil, data= df)
#code to simulate fake data based on experimental design for a two way interaction
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
graphics.off()
setwd("~/Documents/GitHub/Coexistence-in-BC-Forests/Analyses/scripts")
set.seed(1234)
### code the fake data
density <- c(0,1)
temptreat <- c(0,1)
soil_type <- c(0,1)
intercepthere <- 30  # watch out of potentially reserved words in R ..
#coding effects
density_effect <- -5 # as in you LOSE 5 units of biomass in the high treatment
temp_effect <- -7.5 # as in you LOSE 7.5 units of biomass in the high temp treatment
denstemp_intxn <- 2 # as in when you have high density and high temp you GAIN 2 units of biomass
soiltype_effect <- -10 #loses 10 units of biomass in conspecific soil
densoil_intxn <- -12 #high density + conspecific soil causes a loss of 12 units of biomass
tempsoil_intxn <- -4 #high temp + conspecific soil causes a loss of 4 units of biomass
densoiltemp_intxn <- -0.5 #high temp + high density + conspecific soil causes a loss of 0.5 units of biomass
reps_per_treatment <- 100 # 10 is always a good place to start (easy to do the math in your head and check your code)
#finds out number of rows needed based on length of all paramters and reps
ntot <- length(density)*length(temptreat)*length(soil_type)*reps_per_treatment
#creates a grid for the factorial design of experiment
factorialgrid <- expand.grid(x_density = c(0, 1), x_temp = c(0,1), x_soil= c(0,1))
#creates dataset based on factorial grid and reps per treatment
df <- as.data.frame(factorialgrid[rep(seq_len(nrow(factorialgrid)), each = reps_per_treatment),])
#calculates the biomass based on treatments and interactions
df$y_biomass <- intercepthere +
density_effect*df$x_density +
temp_effect*df$x_temp +
soiltype_effect*df$x_soil + #3 one-way interactions
denstemp_intxn*(df$x_density*df$x_temp) +
densoil_intxn * (df$x_density*df$x_soil) +
tempsoil_intxn * (df$x_temp * df$x_soil) + #3 two way interactions
densoiltemp_intxn * (df$x_density * df$x_temp * df$x_soil) #1 three way interaction
#incorporating error based on intercept value
error <- 0.15 * 30
# incorporating 15% error into y
df$y_pred<- df$y_biomass + rnorm(ntot, error)
#Statistical model to test paramaters
lm(y_pred~ x_density * x_temp * x_soil, data= df)
#code to simulate fake data based on experimental design for a two way interaction
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
graphics.off()
setwd("~/Documents/GitHub/Coexistence-in-BC-Forests/Analyses/scripts")
set.seed(1234)
### code the fake data
density <- c(0,1)
temptreat <- c(0,1)
soil_type <- c(0,1)
intercepthere <- 30  # watch out of potentially reserved words in R ..
#coding effects
density_effect <- -5 # as in you LOSE 5 units of biomass in the high treatment
temp_effect <- -7.5 # as in you LOSE 7.5 units of biomass in the high temp treatment
denstemp_intxn <- 2 # as in when you have high density and high temp you GAIN 2 units of biomass
soiltype_effect <- -10 #loses 10 units of biomass in conspecific soil
densoil_intxn <- -12 #high density + conspecific soil causes a loss of 12 units of biomass
tempsoil_intxn <- -4 #high temp + conspecific soil causes a loss of 4 units of biomass
densoiltemp_intxn <- -1#high temp + high density + conspecific soil causes a loss of 1 units of biomass
reps_per_treatment <- 100 # 10 is always a good place to start (easy to do the math in your head and check your code)
#finds out number of rows needed based on length of all paramters and reps
ntot <- length(density)*length(temptreat)*length(soil_type)*reps_per_treatment
#creates a grid for the factorial design of experiment
factorialgrid <- expand.grid(x_density = c(0, 1), x_temp = c(0,1), x_soil= c(0,1))
#creates dataset based on factorial grid and reps per treatment
df <- as.data.frame(factorialgrid[rep(seq_len(nrow(factorialgrid)), each = reps_per_treatment),])
#calculates the biomass based on treatments and interactions
df$y_biomass <- intercepthere +
density_effect*df$x_density +
temp_effect*df$x_temp +
soiltype_effect*df$x_soil + #3 one-way interactions
denstemp_intxn*(df$x_density*df$x_temp) +
densoil_intxn * (df$x_density*df$x_soil) +
tempsoil_intxn * (df$x_temp * df$x_soil) + #3 two way interactions
densoiltemp_intxn * (df$x_density * df$x_temp * df$x_soil) #1 three way interaction
#incorporating error based on intercept value
error <- 0.15 * 30
# incorporating 15% error into y
df$y_pred<- df$y_biomass + rnorm(ntot, error)
#Statistical model to test paramaters
lm(y_pred~ x_density * x_temp * x_soil, data= df)
View(factorialgrid)
